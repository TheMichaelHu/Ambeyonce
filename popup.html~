<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
    <div id="track">Loading..</div>

    <script src=".soundcloud-audio.min.js"></script>
    <script>
    (function (global) {
        'use strict';

        var $view = document.getElementById('track');
        var player = global.player = new SoundCloudAudio('38872356186d228acfdb30aa421ffd30');

        var render = function (track) {
            // track info
            var $info = document.createElement('h3');
            $info.innerText = 'Playing: ' + track.user.username + ' - ' + track.title + ' - ';

            // track timings
            var $timer = document.createElement('span');
            // rerender timer on every second

            $info.appendChild($timer);
            // album cover
            var $img = document.createElement('img');
            $img.src = track.artwork_url;

            // play/pause button
            var $button = document.createElement('button');
            var toggleButton = function () {
                if (player.playing) {
                    $button.innerText = 'PLAY';
                    player.pause();
                } else {
                    $button.innerText = 'PAUSE';
                    player.play();
                }
            };
            $button.style.display = 'block';
            $button.innerText = 'PLAY';
            $button.addEventListener('click', toggleButton);
            toggleButton();

            // clean view
            $view.removeChild($view.firstChild);

            // append elements
            $view.appendChild($info);
            $view.appendChild($img);
            $view.appendChild($button);
        };

        player.resolve('https://soundcloud.com/djangodjango/first-light', render);
    })(this);
    </script>
</body>
</html>
